<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot Pro | Gemini 2.5 Enhanced</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="./styles/main.css" rel="stylesheet">
</head>
<body class="welcome-screen" id="mainBody">
    <!-- Animated background -->
    <div class="particles" id="particles"></div>
    <div class="neural-network" id="neuralNetwork"></div>

    <!-- Welcome Screen -->
    <div class="welcome-container" id="welcomeScreen">
        <div class="logo-container">
            <div class="logo">üöÄ</div>
            <div class="logo-rings">
                <div class="ring ring-1"></div>
                <div class="ring ring-2"></div>
                <div class="ring ring-3"></div>
            </div>
        </div>
        <h1 class="welcome-title">
            <span class="gradient-text">AI Chatbot Pro</span>
            <span class="version-badge">v2.5</span>
        </h1>
        <p class="welcome-subtitle">
            Powered by <strong>Google Gemini 2.5 Pro</strong> - Tr√≠ tu·ªá nh√¢n t·∫°o th·∫ø h·ªá m·ªõi v·ªõi kh·∫£ nƒÉng hi·ªÉu ƒëa ph∆∞∆°ng ti·ªán, 
            x·ª≠ l√Ω code, ph√¢n t√≠ch d·ªØ li·ªáu v√† suy lu·∫≠n logic cao c·∫•p.
        </p>
        
        <div class="features-preview">
            <div class="feature-item">
                <i class="fas fa-brain"></i>
                <span>Suy lu·∫≠n th√¥ng minh</span>
            </div>
            <div class="feature-item">
                <i class="fas fa-code"></i>
                <span>Code Generation</span>
            </div>
            <div class="feature-item">
                <i class="fas fa-image"></i>
                <span>Vision AI</span>
            </div>
            <div class="feature-item">
                <i class="fas fa-language"></i>
                <span>Multi-language</span>
            </div>
        </div>
        
        <div class="auth-section">
            <div class="password-container">
                <i class="fas fa-lock input-icon"></i>
                <input 
                    type="password" 
                    class="password-input" 
                    id="passwordInput" 
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ truy c·∫≠p bot n√¢ng cao"
                >
                <div class="input-strength"></div>
            </div>
            <button class="btn btn-primary" onclick="enterPrivate()">
                <span class="btn-content">
                    <i class="fas fa-crown"></i>
                    <span>Truy c·∫≠p Pro Version</span>
                </span>
                <div class="btn-effect"></div>
            </button>
        </div>

        <div class="divider">
            <span>ho·∫∑c</span>
        </div>

        <button class="btn btn-secondary" onclick="enterGuest()">
            <span class="btn-content">
                <i class="fas fa-user"></i>
                <span>D√πng th·ª≠ mi·ªÖn ph√≠</span>
            </span>
        </button>

        <div class="model-selector" id="modelSelector" style="display: none;">
            <label class="model-label">Ch·ªçn AI Model:</label>
            <select class="model-select" id="modelSelect">
                <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (Nhanh)</option>
                <option value="gemini-1.5-pro" selected>Gemini 1.5 Pro (C√¢n b·∫±ng)</option>
                <option value="gemini-1.5-flash">Gemini 1.5 Flash (Ti·∫øt ki·ªám)</option>
            </select>
        </div>
    </div>

    <!-- Chat Screen -->
    <div class="chat-screen" id="chatScreen" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <i class="fas fa-history"></i>
                    <span>L·ªãch s·ª≠ Chat</span>
                </div>
                <div class="sidebar-actions">
                    <button class="new-chat-btn" onclick="newChat()" title="Chat m·ªõi">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="action-btn-small" onclick="exportChats()" title="Xu·∫•t l·ªãch s·ª≠">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            </div>
            <div class="chat-history" id="chatHistory">
                <!-- History items will be added here -->
            </div>
            <div class="sidebar-footer">
                <div class="usage-stats" id="usageStats">
                    <div class="stat-item">
                        <span class="stat-label">Tokens s·ª≠ d·ª•ng:</span>
                        <span class="stat-value" id="tokenCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Chat h√¥m nay:</span>
                        <span class="stat-value" id="todayChats">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="main-chat">
            <!-- Enhanced Header -->
            <div class="chat-header">
                <div class="chat-title">
                    <button class="mobile-toggle" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="ai-status">
                        <div class="status-indicator pulsing"></div>
                        <span id="chatTitle">ü§ñ AI Assistant Pro</span>
                        <div class="model-info" id="currentModel">Gemini 1.5 Pro</div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="action-btn" onclick="toggleVoice()" title="Tho·∫°i" id="voiceBtn">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="action-btn" onclick="toggleTheme()" title="ƒê·ªïi giao di·ªán">
                        <i class="fas fa-moon" id="themeIcon"></i>
                    </button>
                    <button class="action-btn" onclick="showSettings()" title="C√†i ƒë·∫∑t">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="action-btn" onclick="clearChat()" title="X√≥a cu·ªôc tr√≤ chuy·ªán">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="action-btn" onclick="goBack()" title="Quay l·∫°i">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>

            <!-- Chat Messages -->
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div class="message-avatar">
                        <div class="avatar-bot">ü§ñ</div>
                        <div class="online-dot"></div>
                    </div>
                    <div class="message-bubble">
                        <div class="message-header">
                            <span class="sender-name">AI Assistant Pro</span>
                            <span class="model-badge">Gemini 2.5</span>
                            <span class="timestamp">V·ª´a xong</span>
                        </div>
                        <div class="message-content">
                            <div class="welcome-message">
                                <h3>üöÄ Ch√†o m·ª´ng ƒë·∫øn v·ªõi AI Chatbot Pro!</h3>
                                <p>T√¥i ƒë∆∞·ª£c trang b·ªã <strong>Gemini 2.5 Pro</strong> v·ªõi nh·ªØng kh·∫£ nƒÉng ti√™n ti·∫øn:</p>
                                <ul>
                                    <li><span class="feature-icon">üß†</span> Suy lu·∫≠n logic ph·ª©c t·∫°p</li>
                                    <li><span class="feature-icon">üë®‚Äçüíª</span> L·∫≠p tr√¨nh v√† debug code</li>
                                    <li><span class="feature-icon">üñºÔ∏è</span> Ph√¢n t√≠ch h√¨nh ·∫£nh chi ti·∫øt</li>
                                    <li><span class="feature-icon">üìä</span> X·ª≠ l√Ω v√† ph√¢n t√≠ch d·ªØ li·ªáu</li>
                                    <li><span class="feature-icon">üåç</span> H·ªó tr·ª£ ƒëa ng√¥n ng·ªØ</li>
                                </ul>
                                <p class="cta-text">H√£y b·∫Øt ƒë·∫ßu b·∫±ng c√°ch h·ªèi t√¥i b·∫•t c·ª© ƒëi·ªÅu g√¨! ‚ú®</p>
                            </div>
                        </div>
                        <div class="message-actions">
                            <button class="msg-action-btn" onclick="copyMessage(this)" title="Sao ch√©p">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="msg-action-btn" onclick="speakMessage(this)" title="ƒê·ªçc to">
                                <i class="fas fa-volume-up"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Typing Indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="message-avatar">
                    <div class="avatar-bot">ü§ñ</div>
                </div>
                <div class="typing-bubble">
                    <div class="typing-animation">
                        <div class="typing-dots">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                        <span class="typing-text">AI ƒëang suy nghƒ©...</span>
                    </div>
                </div>
            </div>

            <!-- Enhanced Input Area -->
            <div class="chat-input-container">
                <!-- Suggestions -->
                <div class="suggestion-chips" id="suggestionChips">
                    <div class="chip" onclick="sendSuggestion(this)">üí° Vi·∫øt code Python</div>
                    <div class="chip" onclick="sendSuggestion(this)">üñºÔ∏è Ph√¢n t√≠ch h√¨nh ·∫£nh</div>
                    <div class="chip" onclick="sendSuggestion(this)">üìä T·∫°o bi·ªÉu ƒë·ªì</div>
                    <div class="chip" onclick="sendSuggestion(this)">üßÆ Gi·∫£i to√°n</div>
                    <div class="chip" onclick="sendSuggestion(this)">‚úçÔ∏è Vi·∫øt vƒÉn</div>
                </div>

                <div class="chat-input">
                    <!-- File Preview -->
                    <div class="file-attachments-preview" id="fileAttachmentsPreview"></div>
                    
                    <!-- Voice Recording -->
                    <div class="voice-recording" id="voiceRecording" style="display: none;">
                        <div class="recording-animation">
                            <div class="pulse-ring"></div>
                            <div class="recording-icon">üé§</div>
                        </div>
                        <div class="recording-info">
                            <span class="recording-text">ƒêang ghi √¢m...</span>
                            <span class="recording-duration" id="recordingDuration">00:00</span>
                        </div>
                        <button class="stop-recording-btn" onclick="stopRecording()">
                            <i class="fas fa-stop"></i>
                        </button>
                    </div>
                    
                    <div class="input-wrapper">
                        <div class="input-container">
                            <textarea 
                                class="message-input enhanced-input" 
                                id="messageInput" 
                                placeholder="Nh·∫≠p tin nh·∫Øn ho·∫∑c k√©o th·∫£ file v√†o ƒë√¢y... (Enter ƒë·ªÉ g·ª≠i, Shift+Enter ƒë·ªÉ xu·ªëng d√≤ng)"
                                rows="1"
                            ></textarea>
                            <div class="input-enhancements">
                                <div class="character-counter" id="charCounter">0</div>
                                <div class="input-mode" id="inputMode">Text</div>
                            </div>
                        </div>
                        
                        <div class="input-actions">
                            <div class="attachment-group">
                                <button class="attach-btn" onclick="triggerFileInput()" title="ƒê√≠nh k√®m file">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                                <button class="attach-btn" onclick="triggerImageInput()" title="ƒê√≠nh k√®m ·∫£nh">
                                    <i class="fas fa-image"></i>
                                </button>
                                <button class="attach-btn" onclick="triggerCameraInput()" title="Ch·ª•p ·∫£nh">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                            
                            <div class="send-group">
                                <button class="voice-btn" id="voiceModeBtn" onclick="toggleVoiceMode()" title="Ch·∫ø ƒë·ªô tho·∫°i">
                                    <i class="fas fa-microphone"></i>
                                </button>
                                <button class="send-btn enhanced-send" id="sendBtn" onclick="sendMessage()">
                                    <div class="send-icon">
                                        <i class="fas fa-paper-plane"></i>
                                    </div>
                                    <div class="send-ripple"></div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal" style="display: none;">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> C√†i ƒë·∫∑t n√¢ng cao</h2>
                <button class="close-btn" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="setting-section">
                    <h3>ü§ñ AI Model</h3>
                    <div class="setting-item">
                        <label>Ch·ªçn Model:</label>
                        <select id="modelSelectSetting" onchange="updateModel()">
                            <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (Th·ª≠ nghi·ªám)</option>
                            <option value="gemini-1.5-pro" selected>Gemini 1.5 Pro</option>
                            <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Nhi·ªát ƒë·ªô (Creativity):</label>
                        <input type="range" id="temperatureSlider" min="0" max="1" step="0.1" value="0.7" oninput="updateTemperature(this.value)">
                        <span id="temperatureValue">0.7</span>
                    </div>
                </div>
                
                <div class="setting-section">
                    <h3>üé® Giao di·ªán</h3>
                    <div class="setting-item">
                        <label>Ch·∫ø ƒë·ªô t·ªëi:</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="darkModeToggle" checked onchange="toggleTheme()">
                            <label for="darkModeToggle"></label>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Hi·ªáu ·ª©ng:</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="animationsToggle" checked onchange="toggleAnimations()">
                            <label for="animationsToggle"></label>
                        </div>
                    </div>
                </div>
                
                <div class="setting-section">
                    <h3>üîä √Çm thanh</h3>
                    <div class="setting-item">
                        <label>ƒê·ªçc ph·∫£n h·ªìi:</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="ttsToggle" onchange="toggleTTS()">
                            <label for="ttsToggle"></label>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Gi·ªçng ƒë·ªçc:</label>
                        <select id="voiceSelect">
                            <option value="vi-VN">Ti·∫øng Vi·ªát</option>
                            <option value="en-US">English</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- File inputs -->
    <input type="file" id="fileInput" class="file-input" multiple accept=".txt,.pdf,.doc,.docx,.json,.js,.py,.html,.css,.md,.csv,.xml" onchange="handleFileSelect(event)">
    <input type="file" id="imageInput" class="file-input" multiple accept="image/*" onchange="handleImageSelect(event)">
    <input type="file" id="cameraInput" class="file-input" accept="image/*" capture="camera" onchange="handleImageSelect(event)">

    <!-- Enhanced Upload overlay -->
    <div class="upload-overlay" id="uploadOverlay">
        <div class="upload-area">
            <div class="upload-animation">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-rings">
                    <div class="ring"></div>
                    <div class="ring"></div>
                </div>
            </div>
            <h3>Th·∫£ file v√†o ƒë√¢y</h3>
            <p>H·ªó tr·ª£: ·∫¢nh, Documents, Code files, Data files</p>
            <div class="supported-formats">
                <span class="format-tag">IMG</span>
                <span class="format-tag">PDF</span>
                <span class="format-tag">DOC</span>
                <span class="format-tag">CODE</span>
                <span class="format-tag">DATA</span>
            </div>
        </div>
    </div>

    <!-- Enhanced notification -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <div class="notification-icon"></div>
            <div class="notification-text"></div>
        </div>
        <div class="notification-progress"></div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-animation">
                <div class="loading-brain">üß†</div>
                <div class="loading-waves">
                    <div class="wave"></div>
                    <div class="wave"></div>
                    <div class="wave"></div>
                </div>
            </div>
            <div class="loading-text">AI ƒëang x·ª≠ l√Ω...</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.2/marked.min.js"></script>
    <script src="./scripts/config.js"></script>
    <script src="./scripts/ai-engine.js"></script>
    <script src="./scripts/voice-handler.js"></script>
    <script src="./scripts/file-handler.js"></script>
    <script src="./scripts/ui-manager.js"></script>
    <script src="./scripts/chat-manager.js"></script>
    <script src="./scripts/main.js"></script>
</body>
</html>